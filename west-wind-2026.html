<!DOCTYPE html>
<html lang="ka">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>West Wind 2026 • GASGUN Scoreboard</title>
  
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600;700&family=Noto+Sans+Georgian:wght@400;600;700&display=swap" rel="stylesheet">
  
  <style>
    body {
      font-family: 'Noto Sans Georgian', sans-serif;
      background-color: #0a0a0a;
      color: #ffffff;
    }
    
    h1, h2, h3 {
      font-family: 'Oswald', sans-serif;
    }
    
    .shot-circle {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: inline-block;
      margin: 0 2px;
    }
    
    .shot-hit {
      background-color: #22c55e;
    }
    
    .shot-miss {
      background-color: #ef4444;
    }
    
    .rank-1 {
      background: linear-gradient(135deg, rgba(197, 160, 101, 0.3), rgba(197, 160, 101, 0.1));
      border-left: 4px solid #FFD700;
    }
    
    .rank-2 {
      background: linear-gradient(135deg, rgba(192, 192, 192, 0.3), rgba(192, 192, 192, 0.1));
      border-left: 4px solid #C0C0C0;
    }
    
    .rank-3 {
      background: linear-gradient(135deg, rgba(205, 127, 50, 0.3), rgba(205, 127, 50, 0.1));
      border-left: 4px solid #CD7F32;
    }
    
    .tab-button {
      transition: all 0.3s ease;
    }
    
    .tab-button:hover {
      background-color: rgba(197, 160, 101, 0.2);
    }
    
    .tab-button.active {
      background-color: #c5a065;
      color: #0a0a0a;
    }
    
    @media (max-width: 768px) {
      .shot-circle {
        width: 16px;
        height: 16px;
        margin: 0 1px;
      }
      
      table {
        font-size: 14px;
      }
    }
  </style>
</head>
<body class="min-h-screen">
  
  <!-- Header -->
  <header class="py-6 px-4 border-b border-gray-800">
    <div class="container mx-auto max-w-7xl">
      <a href="/" class="text-sm text-gray-400 hover:text-[#c5a065] transition-colors mb-4 inline-block">
        ← Back to West Front
      </a>
      <h1 class="text-4xl md:text-6xl font-bold text-center tracking-wider">
        <span class="text-red-600">WEST WIND 2026</span>
        <span class="text-gray-600 mx-2">•</span>
        <span class="text-[#c5a065]">GASGUN</span>
      </h1>
    </div>
  </header>
  
  <!-- Main Content -->
  <main class="container mx-auto max-w-7xl px-4 py-8">
    
    <!-- Stage Tabs -->
    <div class="flex flex-wrap gap-2 mb-8 justify-center">
      <button class="tab-button active px-6 py-3 rounded-lg font-semibold" data-stage="overall">
        Overall Standings
      </button>
      <button class="tab-button px-6 py-3 rounded-lg font-semibold" data-stage="0">
        Stage 1
      </button>
      <button class="tab-button px-6 py-3 rounded-lg font-semibold" data-stage="1">
        Stage 2
      </button>
      <button class="tab-button px-6 py-3 rounded-lg font-semibold" data-stage="2">
        Stage 3
      </button>
      <button class="tab-button px-6 py-3 rounded-lg font-semibold" data-stage="3">
        Stage 4
      </button>
      <button class="tab-button px-6 py-3 rounded-lg font-semibold" data-stage="4">
        Stage 5
      </button>
      <button class="tab-button px-6 py-3 rounded-lg font-semibold" data-stage="5">
        Stage 6
      </button>
    </div>
    
    <!-- Stage Subtitle -->
    <h2 id="stage-subtitle" class="text-2xl md:text-3xl text-center text-[#c5a065] mb-8 font-semibold">
      Overall Tournament Results
    </h2>
    
    <!-- Scoreboard Table -->
    <div class="overflow-x-auto">
      <table class="w-full border-collapse">
        <thead>
          <tr class="border-b border-gray-800">
            <th class="text-left py-4 px-4 text-gray-400 font-semibold">#</th>
            <th class="text-left py-4 px-4 text-gray-400 font-semibold">Participant</th>
            <th class="text-center py-4 px-4 text-gray-400 font-semibold hidden md:table-cell">Shots</th>
            <th class="text-center py-4 px-4 text-gray-400 font-semibold">Score</th>
          </tr>
        </thead>
        <tbody id="scoreboard-body">
          <!-- Data will be inserted here -->
        </tbody>
      </table>
    </div>
    
  </main>
  
  <!-- Footer -->
  <footer class="py-8 px-4 text-center text-gray-500 text-sm border-t border-gray-800 mt-12">
    <p>&copy; 2026 West Front Shooting Range • All Rights Reserved</p>
  </footer>
  
  <script>
    let tournamentData = null;
    let currentStage = 'overall';
    
    // Fetch tournament data
    fetch('data/west-wind-2026.json')
      .then(response => response.json())
      .then(data => {
        tournamentData = data;
        renderScoreboard('overall');
      })
      .catch(error => {
        console.error('Error loading tournament data:', error);
        document.getElementById('scoreboard-body').innerHTML = 
          '<tr><td colspan="4" class="text-center py-8 text-red-500">Error loading tournament data</td></tr>';
      });
    
    // Tab click handlers
    document.querySelectorAll('.tab-button').forEach(button => {
      button.addEventListener('click', () => {
        // Update active state
        document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
        
        // Render scoreboard
        const stage = button.dataset.stage;
        currentStage = stage;
        renderScoreboard(stage);
      });
    });
    
    function renderScoreboard(stage) {
      if (!tournamentData) return;
      
      const tbody = document.getElementById('scoreboard-body');
      const subtitle = document.getElementById('stage-subtitle');
      
      let scores = [];
      
      if (stage === 'overall') {
        // Calculate overall scores
        subtitle.textContent = 'Overall Tournament Results';
        
        // Create a map of total scores
        const overallScores = {};
        
        tournamentData.stages.forEach(stageData => {
          stageData.scores.forEach(participant => {
            if (!overallScores[participant.name]) {
              overallScores[participant.name] = {
                name: participant.name,
                score: 0,
                stages: []
              };
            }
            overallScores[participant.name].score += participant.score;
            overallScores[participant.name].stages.push(participant.score);
          });
        });
        
        scores = Object.values(overallScores);
      } else {
        // Show specific stage
        const stageData = tournamentData.stages[parseInt(stage)];
        subtitle.textContent = `${stageData.name} • ${stageData.subtitle}`;
        scores = stageData.scores.map(s => ({...s}));
      }
      
      // Sort by score descending
      scores.sort((a, b) => b.score - a.score);
      
      // Render rows
      tbody.innerHTML = '';
      scores.forEach((participant, index) => {
        const rank = index + 1;
        const tr = document.createElement('tr');
        tr.className = 'border-b border-gray-800 hover:bg-gray-900 transition-colors';
        
        // Add rank styling for top 3
        if (rank === 1) tr.classList.add('rank-1');
        else if (rank === 2) tr.classList.add('rank-2');
        else if (rank === 3) tr.classList.add('rank-3');
        
        // Rank cell
        const rankCell = document.createElement('td');
        rankCell.className = 'py-4 px-4 font-bold text-[#c5a065]';
        rankCell.textContent = rank;
        tr.appendChild(rankCell);
        
        // Name cell
        const nameCell = document.createElement('td');
        nameCell.className = 'py-4 px-4 font-semibold';
        nameCell.textContent = participant.name;
        tr.appendChild(nameCell);
        
        // Shots cell (only for single stage view)
        if (stage !== 'overall') {
          const shotsCell = document.createElement('td');
          shotsCell.className = 'py-4 px-4 text-center hidden md:table-cell';
          
          participant.shots.forEach(shot => {
            const circle = document.createElement('span');
            circle.className = `shot-circle ${shot === 1 ? 'shot-hit' : 'shot-miss'}`;
            shotsCell.appendChild(circle);
          });
          
          tr.appendChild(shotsCell);
        } else {
          // For overall view, show stage breakdown
          const shotsCell = document.createElement('td');
          shotsCell.className = 'py-4 px-4 text-center text-sm text-gray-400 hidden md:table-cell';
          if (participant.stages) {
            shotsCell.textContent = participant.stages.join(' • ');
          }
          tr.appendChild(shotsCell);
        }
        
        // Score cell
        const scoreCell = document.createElement('td');
        scoreCell.className = 'py-4 px-4 text-center font-bold text-2xl text-[#c5a065]';
        scoreCell.textContent = participant.score;
        tr.appendChild(scoreCell);
        
        tbody.appendChild(tr);
      });
    }
  </script>
  
</body>
</html>
